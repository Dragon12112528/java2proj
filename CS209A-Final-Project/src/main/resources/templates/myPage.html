<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo Page for CS209A final project</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background-image: url("/image/bg.png");
            background-repeat: repeat;
            background-size: cover;
        }
        .container {
            display: grid;
            justify-content: center;
            align-items: center;
            height: 100vh; /* 使容器占据整个视口高度 */
        }
    </style>
</head>
<body style="text-align: center">
<h1>
     Page for CS209A 2023 Fall final project
</h1>
<input id="ac" type="hidden" th:value="${ac}">
<input id="vc" type="hidden" th:value="${vc}">
<input id="at" type="hidden" th:value="${at}">
<input id="bu" type="hidden" th:value="${bu}">
<input id="sy" type="hidden" th:value="${sy}">
<input id="fa" type="hidden" th:value="${fa}">
<input id="ex" type="hidden" th:value="${ex}">
<input id="sea" type="hidden" th:value="${sea}">
<div class="container">
    <div id="input" style="width: 1000px;height:100px;">
        <form action="/submit" method="post">
            <label for="search">
                <span style="font-weight: bold; font-size: 30px; font-family: '宋体',serif;">search:(input key word)</span>
            </label>
            <input type="text" id="search" name="search" style="width: 200px; height: 30px; font-weight: bold; font-size: 30px;"/>
            <input type="submit" value="提交">
        </form>
    </div>
    <div id="SearchShow" style="width: 1000px;height:600px;"></div>
    <div id="ViewCount" style="width: 1000px;height:600px;"></div>
    <div id="Activity" style="width: 1000px;height:600px;"></div>
    <div id="AnswerCount" style="width: 1000px;height:600px;"></div>
    <div id="bug" style="width: 1000px;height:600px;"></div>
    <div id="syntax" style="width: 1000px;height:600px;"></div>
    <div id="fatal" style="width: 1000px;height:600px;"></div>
    <div id="exceptions" style="width: 1000px;height:600px;"></div>

</div>


<script type="text/javascript">
    var myChart_Search = echarts.init(document.getElementById('SearchShow'));
    barData = [];
    json =$('#sea').val();
    json = JSON.parse(json);
    for (const [key, value] of Object.entries(json)) {
        barData.push({
            name: key,
            relevance: value,
        })
    }
    let barchartOption_Search = {
        dataset: [
            {
                dimensions: ['name', 'relevance'],
                source: barData
            },
            {
                transform: {
                    type: 'sort',
                    config: { dimension: 'relevance', order: 'desc' }
                }
            }
        ],
        tooltip: {
        },
        title: {
            text: 'Relevance to critical times',
            textStyle: {
                fontStyle: 'oblique',
                fontSize: 20,
                color: '#000000'
            },
            left: 'center'
        },
        xAxis: {
            type: 'category',
            axisLabel: { interval: 0, rotate: 30 }
        },
        yAxis: {},
        series: {
            type: 'bar',
            // encode: { x: 'name', y: 'score' },
            datasetIndex: 1,
        }
    };

    myChart_Search.setOption(barchartOption_Search);
</script>

<script type="text/javascript">
    var myChart_ViewCount = echarts.init(document.getElementById('ViewCount'));
    let barData = [];
    json =$('#vc').val();
    json = JSON.parse(json);
    for (const [key, value] of Object.entries(json)) {
        barData.push({
            name: key,
            ViewCount: value,
        })
    }
    let barchartOption_ViewCount = {
        dataset: [
            {
                dimensions: ['name', 'ViewCount'],
                source: barData
            },
            {
                transform: {
                    type: 'sort',
                    config: { dimension: 'ViewCount', order: 'desc' }
                }
            }
        ],
        tooltip: {
        },
        title: {
            text: '10 topics\' ViewCount in Java thread',
            textStyle: {
                fontStyle: 'oblique',
                fontSize: 20,
                color: '#000000'
            },
            left: 'center'
        },
        xAxis: {
            type: 'category',
            axisLabel: { interval: 0, rotate: 30 }
        },
        yAxis: {},
        series: {
            type: 'bar',
            // encode: { x: 'name', y: 'score' },
            datasetIndex: 1,
        }
    };

    myChart_ViewCount.setOption(barchartOption_ViewCount);
</script>

<script type="text/javascript">
    var myChart_Activity = echarts.init(document.getElementById('Activity'));
    barData = [];
    json =$('#at').val();
    json = JSON.parse(json);
    for (const [key, value] of Object.entries(json)) {
        barData.push({
            name: key,
            ActiveCount: value,
        })
    }
    let barchartOption_Activity = {
        dataset: [
            {
                dimensions: ['name', 'ActiveCount'],
                source: barData
            },
            {
                transform: {
                    type: 'sort',
                    config: { dimension: 'ActiveCount', order: 'desc' }
                }
            }
        ],
        tooltip: {
        },
        title: {
            text: '10 topics\' The number of threads active in a week',
            textStyle: {
                fontStyle: 'oblique',
                fontSize: 20,
                color: '#000000'
            },
            left: 'center'
        },
        xAxis: {
            type: 'category',
            axisLabel: { interval: 0, rotate: 30 }
        },
        yAxis: {},
        series: {
            type: 'bar',
            // encode: { x: 'name', y: 'score' },
            datasetIndex: 1,
        }
    };

    myChart_Activity.setOption(barchartOption_Activity);
</script>



<script type="text/javascript">
    var myChart_AnswerCount = echarts.init(document.getElementById('AnswerCount'));
    json =$('#ac').val();
    json = JSON.parse(json);
    barData = [];
    for (const [key, value] of Object.entries(json)) {
        barData.push({
            name: key,
            AnswerCount: value,
        })
    }
    let barchartOption_AnswerCount = {
        dataset: [
            {
                dimensions: ['name', 'AnswerCount'],
                source: barData
            },
            {
                transform: {
                    type: 'sort',
                    config: { dimension: 'AnswerCount', order: 'desc' }
                }
            }
        ],
        tooltip: {
        },
        title: {
            text: '10 topics\' AnswerCount in Java thread',
            textStyle: {
                fontStyle: 'oblique',
                fontSize: 20,
                color: '#000000'
            },
            left: 'center'
        },
        xAxis: {
            type: 'category',
            axisLabel: { interval: 0, rotate: 30 }
        },
        yAxis: {},
        series: {
            type: 'bar',
            // encode: { x: 'name', y: 'score' },
            datasetIndex: 1,
        }
    };

    myChart_AnswerCount.setOption(barchartOption_AnswerCount);
</script>

<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('bug'));
    json =$('#bu').val();
    json = JSON.parse(json);
    bingData = [];
    for (const [key, value] of Object.entries(json)) {
        bingData.push({
            name: key,
            value: value,
        })
    }
    // 指定图表的配置项和数据

    option = {
        title: {
            text: 'ViewCount of the three bugs',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        legend: {
            orient: 'vertical',
            left: 'left'
        },
        series: [
            {
                name: 'ViewCount',
                type: 'pie',
                radius: '50%',
                data: bingData,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);


</script>


<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('syntax'));
    json =$('#sy').val();
    json = JSON.parse(json);
    bingData = [];
    for (const [key, value] of Object.entries(json)) {
        bingData.push({
            name: key,
            value: value,
        })
    }
    // 指定图表的配置项和数据
    option = {
        title: {
            text: 'ViewCount of various syntax errors',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        legend: {
            orient: 'vertical',
            left: 'left'
        },
        series: [
            {
                name: 'ViewCount',
                type: 'pie',
                radius: '50%',
                data:bingData,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
</script>


<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('fatal'));
    json =$('#fa').val();
    json = JSON.parse(json);
    bingData = [];
    for (const [key, value] of Object.entries(json)) {
        bingData.push({
            name: key,
            value: value,
        })
    }
    // 指定图表的配置项和数据
    option = {
        title: {
            text: 'ViewCount of various fatal errors',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        legend: {
            orient: 'vertical',
            left: 'left'
        },
        series: [
            {
                name: 'ViewCount',
                type: 'pie',
                radius: '50%',
                data: bingData,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);


</script>



<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('exceptions'));
    json =$('#ex').val();
    json = JSON.parse(json);
    bingData = [];
    for (const [key, value] of Object.entries(json)) {

        bingData.push({
            name: key,
            value: value,
        })
    }
    // 指定图表的配置项和数据
    option = {
        color: ['#ff6666', '#ff3399', '#FFFF00', '#FF8C00','#ff99cc','#11ff11','#2222ff','#ff3333','#44ffff','#555511'],
        title: {
            text: 'ViewCount of various exceptions',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        legend: {
            orient: 'vertical',
            left: 'left'
        },
        series: [
            {
                name: 'ViewCount',
                type: 'pie',
                radius: '50%',
                data: bingData,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 12,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);


</script>
</body>
</html>